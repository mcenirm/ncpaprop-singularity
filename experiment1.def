Bootstrap: localimage
From: images/builder.sif
Stage: build

#%setup
#    touch /file1
#    touch ${SINGULARITY_ROOTFS}/file2

%files
    downloads/petsc/petsc-lite-3.13.1.tar.gz                            /src/petsc.tar.gz
    downloads/slepc/slepc-3.13.2.tar.gz                                 /src/slepc.tar.gz
    downloads/ncpaprop/95ec8cf78c30684e79f086ccb21ce63df6dcf59a.tar.gz  /src/ncpaprop.tar.gz

#%environment
#    export LISTEN_PORT=12345
#    export LC_ALL=C

%post
     cd /src
     ls -alF
     tar xf petsc.tar.gz
     ls -alF
     cd petsc-3.13.1
     ./configure --help #--prefix=/code/petsc
     make

#%runscript
#    echo "Container was created $NOW"
#    echo "Arguments received: $*"
#    exec echo "$@"

#%startscript
#    nc -lp $LISTEN_PORT

#%test
#    grep -q NAME=\"Ubuntu\" /etc/os-release
#    if [ $? -eq 0 ]; then
#        echo "Container base is Ubuntu as expected."
#    else
#        echo "Container base is not Ubuntu."
#    fi

#%labels
#    Author d@sylabs.io
#    Version v0.0.1

%help
    This is a demo container used to illustrate a def file that uses all
    supported sections.

